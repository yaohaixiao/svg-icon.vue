"use strict";(self["webpackChunk_yaohaixiao_svg_icon_vue"]=self["webpackChunk_yaohaixiao_svg_icon_vue"]||[]).push([[924],{2806:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var o=function(){var t=this,e=t._self._c;return e("base-drawer",{ref:"drawer",attrs:{title:t.title,"header-border":"","footer-border":"",size:"medium",padding:"none",buttons:t.buttons,"custom-class":"card-drawer"},on:{close:t.onClose},scopedSlots:t._u([{key:"tabs",fn:function(){return[e("base-tabs-nav",{staticClass:"cart-drawer__tabs",attrs:{stretch:"",tabs:t.tabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})]},proxy:!0},t.isIconView?{key:"toolbar",fn:function(){return[e("cart-drawer-toolbar",{attrs:{"is-checked":t.checked,items:t.options,selected:t.selected},on:{check:t.onCheckAll,import:t.onImport}})]},proxy:!0}:null],null,!0)},[e("div",{class:["cart-drawer__main",{"is-auto":t.isIconView&&!t.disabled}]},[e(t.active,t._b({tag:"component",on:{update:t.onUpdate,delete:t.onDelete}},"component",t.attrs,!1))],1)])},i=[],n=(s(7658),s(5545)),c=s(7642),r=s(481),a=s(8249),l=s(2648);const h=()=>Promise.all([s.e(836),s.e(552)]).then(s.bind(s,3481)),d=()=>Promise.all([s.e(836),s.e(289)]).then(s.bind(s,3337)),u=()=>s.e(967).then(s.bind(s,2394));var m={name:"CartDrawer",componentName:"CartDrawer",components:{BaseDrawer:n.Z,BaseTabsNav:c.Z,CartDrawerToolbar:h,CartDrawerList:d,CartDrawerCode:u},props:{title:{type:String,default:"购物车"},items:{type:Array,default:()=>[]}},data(){return{start:0,last:0,active:"CartDrawerList",checked:!1,tabs:[{label:"SVG 图标集",value:"CartDrawerList"},{label:"JS 源代码",value:"CartDrawerCode"}],collections:[],imports:[],options:[],buttons:[]}},computed:{isIconView(){return"CartDrawerList"===this.active},isUnchecked(){return 0===this.count},attrs(){const t=this.options,e=this.disabled,s=this.code;return this.isIconView?{options:t,isEmpty:e}:{code:s}},disabled(){return 0===this.options.length},selected(){return this.options.filter((t=>t.checked))},symbols(){return this.selected.map((t=>t.symbol))},count(){return this.selected.length},code(){const t={title:"SvgIcon 图标集",code:"SvgIconSet",symbols:this.symbols},e=JSON.stringify(t,null,2);return`// Generated by svg-icon.vue\nconst SvgIconSet = ${e}\n\nexport default SvgIconSet\n`},svg(){return'\x3c!-- Generated by svg-icon.vue --\x3e\n<svg id="svg-icons" aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden;">\n'+this.symbols.join("\n")+"\n</svg>"}},watch:{items(){this.update()},count(){this.updateButtons(),this.updateCheckAll()}},created(){this.update()},mounted(){this.$subscribe("show:drawer",this.show),this.$subscribe("hide:drawer",this.hide)},beforeDestroy(){this.$unsubscribe("show:drawer",this.show),this.$unsubscribe("hide:drawer",this.hide),this.$broadcast("show:cert")},methods:{update(){this.collections=this.items.map((t=>({checked:!0,isBuiltIn:!0,symbol:t}))),this.options=this.collections.concat(this.imports),this.updateCheckAll(),this.updateButtons()},updateCheckAll(){this.checked=this.count>0},updateButtons(){this.buttons=[{name:"cancel",text:"取消",size:"small"},{name:"clean",text:"清空",icon:"trash",disabled:this.disabled,action:()=>{this.clear()}},{name:"download",text:"下载",icon:"download",disabled:this.isUnchecked,action:()=>{this.download()}},{name:"confirm",text:"复制",icon:"copy",size:"small",type:"primary",disabled:this.isUnchecked,action:()=>{this.copy()}}]},uncheckAll(){const t=this.collections.concat(this.imports);this.options=t.map((t=>{const{isBuildIn:e,symbol:s}=t;return{checked:!1,isBuildIn:e,symbol:s}}))},checkAll(){const t=this.collections.concat(this.imports);this.options=t.map((t=>{const{isBuildIn:e,symbol:s}=t;return{checked:!0,isBuildIn:e,symbol:s}}))},doImport(t){(0,l.s)({symbols:t}),t.forEach((t=>{this.imports.push({checked:!0,isBuildIn:!1,symbol:t})})),this.update()},doDelete(t){const e=[...this.imports];this.imports=e.filter((e=>e.symbol!==t)),this.update()},clear(){const t=document.querySelector("#svg-icons"),e=[...this.imports];(0,r.B$)("svg.icon.set"),e.forEach((e=>{const s=/id="(.*?)"/,o=e.symbol.match(s),i=o&&o[1]?o[1]:"",n=document.querySelector(`#${i}`);if(e.isBuildIn||!n)return!1;t.removeChild(n)})),this.imports=[],this.$message.success({round:!0,message:"购物车已清空！"}),this.$broadcast("clean:cart")},copy(){(0,a.vQ)(this.isIconView?this.svg:this.code),this.$message.success({round:!0,message:"代码已复制！"})},download(){this.isIconView?(0,a.dX)("svg-icon-set.svg",this.svg):(0,a.dX)("svg-icon-set.js",this.code)},show(){this.$refs.drawer.open()},hide(){this.$refs.drawer.close()},close(){setTimeout((()=>{this.$broadcast("show:cart")}),300)},onCheckAll(t,e){e||t&&!e?this.checkAll():this.uncheckAll()},onImport(t){this.doImport(t)},onUpdate(t){this.options=[...t]},onDelete(t){console.log("onDelete",t),this.doDelete(t)},onClose(){this.close()}}},p=m,b=s(1001),w=(0,b.Z)(p,o,i,!1,null,"19348537",null),v=w.exports;v.install=function(t){t.component(v.name,v)};var y=v}}]);