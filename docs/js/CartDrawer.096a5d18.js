"use strict";(self["webpackChunk_yaohaixiao_svg_icon_vue"]=self["webpackChunk_yaohaixiao_svg_icon_vue"]||[]).push([[924],{1965:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var o=function(){var t=this,e=t._self._c;return e("base-drawer",{ref:"drawer",attrs:{title:t.title,"header-border":"","footer-border":"",size:"medium",padding:"none",buttons:t.buttons,"custom-class":"card-drawer"},on:{close:t.onClose},scopedSlots:t._u([{key:"tabs",fn:function(){return[e("base-tabs-nav",{staticClass:"cart-drawer__tabs",attrs:{stretch:"",tabs:t.tabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})]},proxy:!0},t.isIconView?{key:"toolbar",fn:function(){return[e("cart-drawer-toolbar",{attrs:{"is-checked":t.checked,items:t.options,selected:t.selected},on:{check:t.onCheckAll,import:t.onImport}})]},proxy:!0}:null],null,!0)},[e("div",{class:["cart-drawer__main",{"is-auto":t.isIconView&&!t.disabled}]},[e(t.active,t._b({tag:"component",on:{update:t.onUpdate,delete:t.onDelete}},"component",t.attrs,!1))],1)])},i=[],a=(s(7658),s(5545)),r=s(7642),n=function(){var t=this,e=t._self._c;return e("base-toolbar",{staticClass:"cart-drawer-toolbar",attrs:{role:"toolbar",flex:"",border:"",padding:"outer",height:"inner"},scopedSlots:t._u([{key:"left",fn:function(){return[e("base-checkbox",{staticClass:"cart-drawer-toolbar__checkbox",attrs:{indeterminate:t.isIndeterminate,disabled:t.disabled},on:{change:t.onCheck},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v(" 全选（"+t._s(t.count)+"） ")])]},proxy:!0},{key:"right",fn:function(){return[e("base-button",{attrs:{type:"text",icon:"import"},on:{click:t.onImport}},[t._v(" 导入 ")]),e("input",{ref:"file",staticClass:"cart-drawer-toolbar__import",attrs:{multiple:"",type:"file",accept:"image/svg+xml"},on:{change:t.onReadFiles}})]},proxy:!0}])})},c=[],l=s(8486),d=s(6674),h=s(954),u=s(2648);let m=0;var p={name:"CartDrawerToolbar",componentName:"CartDrawerToolbar",components:{BaseToolbar:l.Z,BaseCheckbox:d.Z,BaseButton:h.Z},props:{isChecked:{type:Boolean,default:!0},selected:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]}},data(){return{checked:!0,symbols:[]}},computed:{disabled(){return 0===this.items.length},count(){return this.selected.length},isIndeterminate(){const t=this.count;return t>0&&t<this.items.length}},watch:{isChecked(){this.update()}},created(){this.update()},methods:{update(){this.checked=this.isChecked},doImport(t,e){const s=/viewBox="(.*?)"/,o=/<title(([\s\S])*?)>(.*?)<\/title>/,i=/(<(path|polygon)(([\s\S])*?)\s?\/?>((.*?)<\/(path|polygon)>)?)/gi,a=e.match(o),r=a&&a[3]?a[3]:"",n=`icon-${r||t.replace(/\.svg$/,"")}`,c=e.match(s),l=c&&c[1]?c[1]:"",d=e.match(i),h=(0,u.x)(),p=h.find((t=>{const e=/id="(.*?)"/,s=t.match(e),o=s&&s[1]?s[1]:"";return o.toLowerCase()===n.toLowerCase()}));let b=`<symbol id="${n}" viewBox="${l}">\n${d.join("\n")}\n</symbol>`;p&&(m+=1,b=b.replace(n,`${n}-${m}`)),this.symbols.push(b)},readFiles(t){let e=0;t.forEach((s=>{const o=new FileReader;o.readAsText(new Blob([s]),"UTF-8"),o.addEventListener("load",(o=>{const i=o.target.result;e+=1,this.doImport(s.name,i),e===t.length&&(this.$refs.file.value="",this.$emit("import",this.symbols))}))}))},onCheck(){this.$emit("check",this.checked,this.isIndeterminate)},onImport(){this.$refs.file.click()},onReadFiles(t){this.readFiles([...t.target.files])}}},b=p,y=s(1001),w=(0,y.Z)(b,n,c,!1,null,"ec695364",null),f=w.exports;f.install=function(t){t.component(f.name,f)};var v=f,g=function(){var t=this,e=t._self._c;return e("ul",{class:["cart-drawer-list",{"is-empty":t.isEmpty}]},[t.items.length>0?t._l(t.items,(function(s,o){return e("cart-drawer-item",{key:`item-${o}`,attrs:{symbol:s.symbol,"is-checked":s.checked,"is-build-in":s.isBuildIn,index:o},on:{check:t.onCheck,delete:t.onDelete,dragstart:t.onDragStart,drop:t.onDragDrop,dragend:t.onDragEnd}})})):e("cart-drawer-item",{attrs:{"is-empty":""}},[e("base-empty")],1)],2)},k=[],C=s(4693);const D=()=>Promise.all([s.e(836),s.e(752)]).then(s.bind(s,7875));var I={name:"CartDrawerList",componentName:"CartDrawerList",components:{BaseEmpty:C.Z,CartDrawerItem:D},props:{isEmpty:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},data(){return{start:0,last:0,items:[]}},created(){this.update()},watch:{options(){this.update()}},methods:{update(){this.items=[...this.options]},swap(t,e){const s=[...this.items];[s[t],s[e]]=[s[e],s[t]],this.items=s,this.$emit("update",s)},doCheck(t,e){const s=[...this.items];s[t].checked=e,this.items=s,this.$emit("update",s)},doDelete(t,e,s){let o;s?this.$broadcast("remove:icon",t):(o=document.querySelector(`#icon-${e}`),o&&o.parentNode.removeChild(o),this.$emit("delete",t)),this.$message.success({round:!0,message:`图标 ${e} 已移除购物车！`})},onCheck({id:t,checked:e}){this.doCheck(t,e)},onDelete({symbol:t,name:e,isBuildIn:s}){this.doDelete(t,e,s)},onDragStart(t){this.start=parseInt(t,10)},onDragDrop(t){this.last=parseInt(t,10)},onDragEnd(){this.swap(this.start,this.last)}}},$=I,x=(0,y.Z)($,g,k,!1,null,"56f4495e",null),_=x.exports;_.install=function(t){t.component(_.name,_)};var B=_,S=function(t,e){return t("textarea",{staticClass:"cart-drawer__code",attrs:{readonly:""},domProps:{value:e.props.code}})},A=[],E={name:"CartDrawerCode",componentName:"CartDrawerCode",props:{code:{type:String,default:""}}},Z=E,L=(0,y.Z)(Z,S,A,!0,null,null,null),T=L.exports;T.install=function(t){t.component(T.name,T)};var N=T,V=s(481),F=s(8249),U={name:"CartDrawer",componentName:"CartDrawer",components:{BaseDrawer:a.Z,BaseTabsNav:r.Z,CartDrawerToolbar:v,CartDrawerList:B,CartDrawerCode:N},props:{title:{type:String,default:"购物车"},items:{type:Array,default:()=>[]}},data(){return{start:0,last:0,active:"CartDrawerList",checked:!1,tabs:[{label:"SVG 图标集",value:"CartDrawerList"},{label:"JS 源代码",value:"CartDrawerCode"}],collections:[],imports:[],options:[],buttons:[]}},computed:{isIconView(){return"CartDrawerList"===this.active},isUnchecked(){return 0===this.count},attrs(){const t=this.options,e=this.disabled,s=this.code;return this.isIconView?{options:t,isEmpty:e}:{code:s}},disabled(){return 0===this.options.length},selected(){return this.options.filter((t=>t.checked))},symbols(){return this.selected.map((t=>t.symbol))},count(){return this.selected.length},code(){const t={title:"SvgIcon 图标集",code:"SvgIconSet",symbols:this.symbols},e=JSON.stringify(t,null,2);return`// Generated by svg-icon.vue\nconst SvgIconSet = ${e}\n\nexport default SvgIconSet\n`},svg(){return'\x3c!-- Generated by svg-icon.vue --\x3e\n<svg id="svg-icons" aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden;">\n'+this.symbols.join("\n")+"\n</svg>"}},watch:{items(){this.update()},count(){this.updateButtons(),this.updateCheckAll()}},created(){this.update()},mounted(){this.$subscribe("show:drawer",this.show),this.$subscribe("hide:drawer",this.hide)},beforeDestroy(){this.$unsubscribe("show:drawer",this.show),this.$unsubscribe("hide:drawer",this.hide),this.$broadcast("show:cert")},methods:{update(){this.collections=this.items.map((t=>({checked:!0,isBuiltIn:!0,symbol:t}))),this.options=this.collections.concat(this.imports),this.updateCheckAll(),this.updateButtons()},updateCheckAll(){this.checked=this.count>0},updateButtons(){this.buttons=[{name:"cancel",text:"取消",size:"small"},{name:"clean",text:"清空",icon:"trash",disabled:this.disabled,action:()=>{this.clear()}},{name:"download",text:"下载",icon:"download",disabled:this.isUnchecked,action:()=>{this.download()}},{name:"confirm",text:"复制",icon:"copy",size:"small",type:"primary",disabled:this.isUnchecked,action:()=>{this.copy()}}]},uncheckAll(){const t=this.collections.concat(this.imports);this.options=t.map((t=>{const{isBuildIn:e,symbol:s}=t;return{checked:!1,isBuildIn:e,symbol:s}}))},checkAll(){const t=this.collections.concat(this.imports);this.options=t.map((t=>{const{isBuildIn:e,symbol:s}=t;return{checked:!0,isBuildIn:e,symbol:s}}))},doImport(t){(0,u.s)({symbols:t}),t.forEach((t=>{this.imports.push({checked:!0,isBuildIn:!1,symbol:t})})),this.update()},doDelete(t){const e=[...this.imports];this.imports=e.filter((e=>e.symbol!==t)),this.update()},clear(){const t=document.querySelector("#svg-icons"),e=[...this.imports];(0,V.B$)("svg.icon.set"),e.forEach((e=>{const s=/id="(.*?)"/,o=e.symbol.match(s),i=o&&o[1]?o[1]:"",a=document.querySelector(`#${i}`);if(e.isBuildIn||!a)return!1;t.removeChild(a)})),this.imports=[],this.$message.success({round:!0,message:"购物车已清空！"}),this.$broadcast("clean:cart")},copy(){(0,F.vQ)(this.isIconView?this.svg:this.code),this.$message.success({round:!0,message:"代码已复制！"})},download(){this.isIconView?(0,F.dX)("svg-icon-set.svg",this.svg):(0,F.dX)("svg-icon-set.js",this.code)},show(){this.$refs.drawer.open()},hide(){this.$refs.drawer.close()},close(){setTimeout((()=>{this.$broadcast("show:cart")}),300)},onCheckAll(t,e){e||t&&!e?this.checkAll():this.uncheckAll()},onImport(t){this.doImport(t)},onUpdate(t){this.options=[...t]},onDelete(t){this.doDelete(t)},onClose(){this.close()}}},j=U,q=(0,y.Z)(j,o,i,!1,null,"bfe5fa3c",null),z=q.exports;z.install=function(t){t.component(z.name,z)};var G=z}}]);