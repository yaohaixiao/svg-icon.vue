"use strict";(self["webpackChunk_yaohaixiao_svg_icon_vue"]=self["webpackChunk_yaohaixiao_svg_icon_vue"]||[]).push([[924],{1965:function(t,e,n){n.r(e),n.d(e,{default:function(){return R}});n(8309);var o=function(){var t=this,e=t._self._c;return e("base-drawer",{ref:"drawer",attrs:{title:t.title,"header-border":"","footer-border":"",size:"medium",padding:"none",buttons:t.buttons,"custom-class":"card-drawer"},on:{close:t.onClose},scopedSlots:t._u([{key:"tabs",fn:function(){return[e("base-tabs-nav",{staticClass:"cart-drawer__tabs",attrs:{stretch:"",tabs:t.tabs},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})]},proxy:!0},t.isIconView?{key:"toolbar",fn:function(){return[e("cart-drawer-toolbar",{attrs:{"is-checked":t.checked,items:t.options,selected:t.selected},on:{check:t.onCheckAll,import:t.onImport}})]},proxy:!0}:null],null,!0)},[e("div",{class:["cart-drawer__main",{"is-auto":t.isIconView&&!t.disabled}]},[e(t.active,t._b({tag:"component",on:{update:t.onUpdate,delete:t.onDelete}},"component",t.attrs,!1))],1)])},s=[],i=n(5957),r=(n(7327),n(1539),n(1249),n(8862),n(9600),n(2222),n(4747),n(7658),n(4916),n(4723),n(5965)),a=n(7642),c=function(){var t=this,e=t._self._c;return e("base-toolbar",{staticClass:"cart-drawer-toolbar",attrs:{role:"toolbar",flex:"",border:"",padding:"outer",height:"inner"},scopedSlots:t._u([{key:"left",fn:function(){return[e("base-checkbox",{staticClass:"cart-drawer-toolbar__checkbox",attrs:{indeterminate:t.isIndeterminate,disabled:t.disabled},on:{change:t.onCheck},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v(" 全选（"+t._s(t.count)+"） ")])]},proxy:!0},{key:"right",fn:function(){return[e("base-button",{attrs:{type:"text",icon:"import"},on:{click:t.onImport}},[t._v(" 导入 ")]),e("input",{ref:"file",staticClass:"cart-drawer-toolbar__import",attrs:{multiple:"",type:"file",accept:"image/svg+xml"},on:{change:t.onReadFiles}})]},proxy:!0}])})},u=[],l=(n(5306),n(9826),n(8486)),d=n(6238),h=n(954),m=n(2648),p=0,f={name:"CartDrawerToolbar",componentName:"CartDrawerToolbar",components:{BaseToolbar:l.Z,BaseCheckbox:d.Z,BaseButton:h.Z},props:{isChecked:{type:Boolean,default:!0},selected:{type:Array,default:function(){return[]}},items:{type:Array,default:function(){return[]}}},data:function(){return{checked:!0,symbols:[]}},computed:{disabled:function(){return 0===this.items.length},count:function(){return this.selected.length},isIndeterminate:function(){var t=this.count;return t>0&&t<this.items.length}},watch:{isChecked:function(){this.update()}},created:function(){this.update()},methods:{update:function(){this.checked=this.isChecked},doImport:function(t,e){var n=/viewBox="(.*?)"/,o=/<title(([\s\S])*?)>(.*?)<\/title>/,s=/(<(path|polygon)(([\s\S])*?)\s?\/?>((.*?)<\/(path|polygon)>)?)/gi,i=e.match(o),r=i&&i[3]?i[3]:"",a="icon-".concat(r||t.replace(/\.svg$/,"")),c=e.match(n),u=c&&c[1]?c[1]:"",l=e.match(s),d=(0,m.x)(),h=d.find((function(t){var e=/id="(.*?)"/,n=t.match(e),o=n&&n[1]?n[1]:"";return o.toLowerCase()===a.toLowerCase()})),f='<symbol id="'.concat(a,'" viewBox="').concat(u,'">\n').concat(l.join("\n"),"\n</symbol>");h&&(p+=1,f=f.replace(a,"".concat(a,"-").concat(p))),this.symbols.push(f)},readFiles:function(t){var e=this,n=0;t.forEach((function(o){var s=new FileReader;s.readAsText(new Blob([o]),"UTF-8"),s.addEventListener("load",(function(s){var i=s.target.result;n+=1,e.doImport(o.name,i),n===t.length&&(e.$refs.file.value="",e.$emit("import",e.symbols))}))}))},onCheck:function(){this.$emit("check",this.checked,this.isIndeterminate)},onImport:function(){this.$refs.file.click()},onReadFiles:function(t){this.readFiles((0,i.Z)(t.target.files))}}},b=f,v=n(1001),y=(0,v.Z)(b,c,u,!1,null,"ec695364",null),w=y.exports;w.install=function(t){t.component(w.name,w)};var g=w,k=function(){var t=this,e=t._self._c;return e("ul",{class:["cart-drawer-list",{"is-empty":t.isEmpty}]},[t.items.length>0?t._l(t.items,(function(n,o){return e("cart-drawer-item",{key:"item-".concat(o),attrs:{symbol:n.symbol,"is-checked":n.checked,"is-build-in":n.isBuildIn,index:o},on:{check:t.onCheck,delete:t.onDelete,dragstart:t.onDragStart,drop:t.onDragDrop,dragend:t.onDragEnd}})})):e("cart-drawer-item",{attrs:{"is-empty":""}},[e("base-empty")],1)],2)},C=[],D=(n(8783),n(3948),n(4693)),I=function(){return Promise.all([n.e(836),n.e(752)]).then(n.bind(n,9764))},x={name:"CartDrawerList",componentName:"CartDrawerList",components:{BaseEmpty:D.Z,CartDrawerItem:I},props:{isEmpty:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}}},data:function(){return{start:0,last:0,items:[]}},created:function(){this.update()},watch:{options:function(){this.update()}},methods:{update:function(){this.items=(0,i.Z)(this.options)},swap:function(t,e){var n=(0,i.Z)(this.items),o=[n[e],n[t]];n[t]=o[0],n[e]=o[1],this.items=n,this.$emit("update",n)},doCheck:function(t,e){var n=(0,i.Z)(this.items);n[t].checked=e,this.items=n,this.$emit("update",n)},doDelete:function(t,e,n){var o;n?this.$broadcast("remove:icon",t):(o=document.querySelector("#icon-".concat(e)),o&&o.parentNode.removeChild(o),this.$emit("delete",t)),this.$message.success({round:!0,message:"图标 ".concat(e," 已移除购物车！")})},onCheck:function(t){var e=t.id,n=t.checked;this.doCheck(e,n)},onDelete:function(t){var e=t.symbol,n=t.name,o=t.isBuildIn;this.doDelete(e,n,o)},onDragStart:function(t){this.start=parseInt(t,10)},onDragDrop:function(t){this.last=parseInt(t,10)},onDragEnd:function(){this.swap(this.start,this.last)}}},_=x,B=(0,v.Z)(_,k,C,!1,null,"56f4495e",null),$=B.exports;$.install=function(t){t.component($.name,$)};var S=$,Z=function(t,e){return t("textarea",{staticClass:"cart-drawer__code",attrs:{readonly:""},domProps:{value:e.props.code}})},A=[],E={name:"CartDrawerCode",componentName:"CartDrawerCode",props:{code:{type:String,default:""}}},L=E,T=(0,v.Z)(L,Z,A,!0,null,null,null),N=T.exports;N.install=function(t){t.component(N.name,N)};var V=N,F=n(481),U=n(8249),j={name:"CartDrawer",componentName:"CartDrawer",components:{BaseDrawer:r.Z,BaseTabsNav:a.Z,CartDrawerToolbar:g,CartDrawerList:S,CartDrawerCode:V},props:{title:{type:String,default:"购物车"},items:{type:Array,default:function(){return[]}}},data:function(){return{start:0,last:0,active:"CartDrawerList",checked:!1,tabs:[{label:"SVG 图标集",value:"CartDrawerList"},{label:"JS 源代码",value:"CartDrawerCode"}],collections:[],imports:[],options:[],buttons:[]}},computed:{isIconView:function(){return"CartDrawerList"===this.active},isUnchecked:function(){return 0===this.count},attrs:function(){var t=this.options,e=this.disabled,n=this.code;return this.isIconView?{options:t,isEmpty:e}:{code:n}},disabled:function(){return 0===this.options.length},selected:function(){return this.options.filter((function(t){return t.checked}))},symbols:function(){return this.selected.map((function(t){return t.symbol}))},count:function(){return this.selected.length},code:function(){var t={title:"SvgIcon 图标集",code:"SvgIconSet",symbols:this.symbols},e=JSON.stringify(t,null,2);return"// Generated by svg-icon.vue\nconst SvgIconSet = ".concat(e,"\n\nexport default SvgIconSet\n")},svg:function(){return'\x3c!-- Generated by svg-icon.vue --\x3e\n<svg id="svg-icons" aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden;">\n'+this.symbols.join("\n")+"\n</svg>"}},watch:{items:function(){this.update()},count:function(){this.updateButtons(),this.updateCheckAll()}},created:function(){this.update()},mounted:function(){this.$subscribe("show:drawer",this.show),this.$subscribe("hide:drawer",this.hide)},beforeDestroy:function(){this.$unsubscribe("show:drawer",this.show),this.$unsubscribe("hide:drawer",this.hide),this.$broadcast("show:cert")},methods:{update:function(){this.collections=this.items.map((function(t){return{checked:!0,isBuiltIn:!0,symbol:t}})),this.options=this.collections.concat(this.imports),this.updateCheckAll(),this.updateButtons()},updateCheckAll:function(){this.checked=this.count>0},updateButtons:function(){var t=this;this.buttons=[{name:"cancel",text:"取消",size:"small"},{name:"clean",text:"清空",icon:"trash",disabled:this.disabled,action:function(){t.clear()}},{name:"download",text:"下载",icon:"download",disabled:this.isUnchecked,action:function(){t.download()}},{name:"confirm",text:"复制",icon:"copy",size:"small",type:"primary",disabled:this.isUnchecked,action:function(){t.copy()}}]},uncheckAll:function(){var t=this.collections.concat(this.imports);this.options=t.map((function(t){var e=t.isBuildIn,n=t.symbol;return{checked:!1,isBuildIn:e,symbol:n}}))},checkAll:function(){var t=this.collections.concat(this.imports);this.options=t.map((function(t){var e=t.isBuildIn,n=t.symbol;return{checked:!0,isBuildIn:e,symbol:n}}))},doImport:function(t){var e=this;(0,m.s)({symbols:t}),t.forEach((function(t){e.imports.push({checked:!0,isBuildIn:!1,symbol:t})})),this.update()},doDelete:function(t){var e=(0,i.Z)(this.imports);this.imports=e.filter((function(e){return e.symbol!==t})),this.update()},clear:function(){var t=document.querySelector("#svg-icons"),e=(0,i.Z)(this.imports);(0,F.B$)("svg.icon.set"),e.forEach((function(e){var n=/id="(.*?)"/,o=e.symbol.match(n),s=o&&o[1]?o[1]:"",i=document.querySelector("#".concat(s));if(e.isBuildIn||!i)return!1;t.removeChild(i)})),this.imports=[],this.$message.success({round:!0,message:"购物车已清空！"}),this.$broadcast("clean:cart")},copy:function(){(0,U.vQ)(this.isIconView?this.svg:this.code),this.$message.success({round:!0,message:"代码已复制！"})},download:function(){this.isIconView?(0,U.dX)("svg-icon-set.svg",this.svg):(0,U.dX)("svg-icon-set.js",this.code)},show:function(){this.$refs.drawer.open()},hide:function(){this.$refs.drawer.close()},close:function(){var t=this;setTimeout((function(){t.$broadcast("show:cart")}),300)},onCheckAll:function(t,e){e||t&&!e?this.checkAll():this.uncheckAll()},onImport:function(t){this.doImport(t)},onUpdate:function(t){this.options=(0,i.Z)(t)},onDelete:function(t){this.doDelete(t)},onClose:function(){this.close()}}},q=j,z=(0,v.Z)(q,o,s,!1,null,"bfe5fa3c",null),G=z.exports;G.install=function(t){t.component(G.name,G)};var R=G}}]);